import { writable } from 'svelte/store';
import {candidates} from './candidates'
import { strategyService } from './strategyService'

function createTextStore() {
    // 创建一个字典，存储字符串数组
    const text = writable([]);
    // 监听 candidates 的变化并更新 text
    candidates.subscribe(($candidates) => {
        const newText = Array.from(strategyService.getNewestValidStrategyList());
        console.log(newText);
        text.set(newText);
    });

    return {
        subscribe: text.subscribe,

        set(value) {
            text.set(value);
        },

        get() {
            let value;
            text.subscribe($text => {
                value = $text;
            })();
            return value;
        }
    };
}


export const textStore = createTextStore();